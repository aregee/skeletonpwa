!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("skeletonpwa",[],t):"object"==typeof exports?exports.skeletonpwa=t():e.skeletonpwa=t()}(this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=1)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mix=t.Vent=t.supportComponents=t.supportRouterFactory=t.supportDomApi=t.supportApi=void 0;var r=n(5),o=n(6),i=n(7),u=n(8),a=n(9),c=n(14);t.supportApi=r.supportApi,t.supportDomApi=o.supportDomApi,t.supportRouterFactory=i.supportRouterFactory,t.supportComponents=a.supportComponents,t.Vent=u.Vent,t.mix=c.mix},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vent=t.skeletonEngine=t.skeletonPwa=void 0;var r=n(2),o={};window.skeletonPwa=r.skeletonPwa,window.skeletonEngine=o,r.skeletonPwa.factory("coreApi",function(e){var t=function(e,t,n){return e.provider(t,n)},n=function(e,t,n){return e.provider(t,n)},o=function(e,t,n){return e.factory(t,n)},i=function(e,t,n){return e.constant(t,n)},u=function(e,t,n){return e.value(t,n)},a=function(e,t,n){return e.middleware(t,n)},c={};return c.provider=t.bind(null,r.skeletonPwa),c.service=n.bind(null,r.skeletonPwa),c.factory=o.bind(null,r.skeletonPwa),c.middleware=a.bind(null,r.skeletonPwa),c.value=u.bind(null,r.skeletonPwa),c.constant=i.bind(null,r.skeletonPwa),c});var i=function(e,t,n,r,o,i,u,a){function c(e){e(this.app),this.app.vent.emit("engineLoaded",name,this.app)}var s={},l=t.viewContainer?t.viewContainer:".view-container";s.utils={},s.core=e,s.components={},s.element=o(t.elements),s.utils.api=i(t.api),s.utils.viewContainer=n.querySelector(l),s.components.views=new Map,s.vent=e.vent,s.appRouter=r,s.datastore=u,s.utils.hooks={};var f=function(e){return{tpl:function(){return"partials[]="},val:e||""}},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(t){return e.reduce(function(e,t){return""===e.val?(e.val=e.val+e.tpl()+t,e):(e.val=e.val+"&"+e.tpl()+t,e)},t)}},v=function(e){return e.val},h=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return v(p(t)(f(e)))};s.utils.genUrl=h;var d=function(e){return Object.keys(e).reduce(function(t,n){return t.push({key:n,val:e[n]}),t},[])};s.utils.reduceParams=function(e){return function(t){return t.url+e(t.args).reduce(function(e,t){return null===t.val||""===t.key?e:e+"?&"+t.key+"="+t.val},"")}}(d);var y={app:s};return y.run=c.bind(y),console.log(a),Object.assign({},y,a)};o.bootstrap=function(e,t){if(t){var n=t;return r.skeletonPwa.provider(e,function(){this.$get=function(e){var t=e.$document,o=e.http,u=e.$createElement,a=(e.$window,e.state),c={};return c.$name="datastore",c.$type="service",c.$value=Map,e.$register(c),new i(r.skeletonPwa,n,t,a,u,o,e.datastore,e.coreApi)}}),this}return r.skeletonPwa.container[e]},o.shell=function(e){var t=r.skeletonPwa.container[e];return t||r.skeletonPwa.container.coreApi},t.skeletonPwa=r.skeletonPwa,t.skeletonEngine=o,t.Vent=r.Vent},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Vent=t.skeletonPwa=void 0;var r=n(3),o=n(0);r.ProgressiveEngine.instanceWaiters=[],r.ProgressiveEngine.prototype.status=function(){return{active:this.active,name:this.name}},r.ProgressiveEngine.onInstance=function(e){r.ProgressiveEngine.instanceWaiters.push(e)};(0,o.supportDomApi)(r.ProgressiveEngine),(0,o.supportRouterFactory)(r.ProgressiveEngine),(0,o.supportApi)(r.ProgressiveEngine),(0,o.supportComponents)(r.ProgressiveEngine),function(e){var t=function(t,n){var r=n.resolve;n.reject;t.service("$vent",function(){return o.Vent}),t.service("mix",function(){return o.mix}),e.prototype.active=!0,r(t)};e.onInstance(t)}(r.ProgressiveEngine);var i=new r.ProgressiveEngine;t.skeletonPwa=i,t.Vent=o.Vent},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.ProgressiveEngine=void 0;var u=n(4),a=n(0);t.ProgressiveEngine=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));if(n.active)return o(n);for(t.Singleton=n,n.options={app:"skeleton"},n.vent=new a.Vent,n.instanceWaiterProps=[];t.instanceWaiters.length;){n.instanceWaiterProps.push(function(e){return new Promise(function(n,r){t.instanceWaiters.shift()(e,{resolve:n,reject:r})})}(n))}return n}return i(t,e),t}(u.AppShell)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.AppShell=void 0;var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=n(0),c=n(15),s=function e(t){return t?(t^16*Math.random()>>t/4).toString(16):([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,e)};t.AppShell=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.config={strict:!1},n.id=s,n.modules={},n.decorators={},n.nested={},n.providerMap={},n.originalProviders={},n.middlewares={},n.deferred=[];var i=n.register.bind(n),u=n.decorator.bind(n);return n.container={$decorator:u,$register:i,$list:n.list.bind(n)},n}return i(t,e),u(t,[{key:"getNested",value:function(e,t){var n=e[t];if(void 0===n&&this.config.strict)throw new Error("Container was unable to resolve a service.  `"+t+"` is undefined.");return n}},{key:"getNestedModule",value:function(e){return this.nested[e]||(this.nested[e]=t.module())}},{key:"getNestedService",value:function(e){return e.split(".").reduce(this.getNested.bind(this),this)}}],[{key:"module",value:function(e){if("string"==typeof e){var n=this.modules[e];return n||(this.modules[e]=n=new t,n.constant("CONTAINER_NAME",e)),n}return new t}},{key:"clear",value:function(e){"string"==typeof e?delete this.modules[e]:this.modules={}}}]),t}((0,a.mix)(c.Container).with(c.ProviderMixin,c.FactoryMixin,c.DecorateMixin,c.ConstantMixin,c.ValueMixin,c.MiddlewareMixin))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){var t=e||window.location.origin,n=function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=0===n.indexOf("http")?{}:{"Content-Type":"application/json"},i=0===n.indexOf("http")?n:t+n;return Object.assign(r,{method:e,credentials:"same-origin",headers:r.headers?r.headers:o,isJson:!r.isJson||r.isJson}),new Promise(function(e,t){fetch(i,r).then(function(n){if(n.ok)r.isJson&&e(n.json()),e(n);else{var o={};Object.assign(o,function(e){return{status:e.status,statusText:e.statusText,url:e.url}}(n)),o.traceback=n,o.message=n.json(),t(o)}}).catch(function(e){var n=new Error(e.toString());n.response=e,t(n)})})};return["GET","PUT","POST","DELETE"].forEach(function(e){n[e.toLowerCase()]=function(t,r){return n(e,t,r)}}),n},o=function(e,t){var n=t.resolve;t.reject;e.service("http",function(){return r}),n(e)};t.supportApi=function(e){e.onInstance(o)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.supportDomApi=function(e){function t(e,t){var n=Math.round(Math.random()*Date.now()).toString(20).substr(0,4);Object.keys(e).forEach(function(n){return t[n]=e[n]}),t.setAttribute("uid",n)}function n(e,t){return!(!e||!e.match)&&(t.innerHTML=e,!0)}function r(e){return function(r,o){var i=document.createElement(e);return r&&t(r,i),o&&(o.map&&o.forEach(function(e){n(e,i)||i.appendChild(e)}),n(o,i)),i}}var o=function(e){var t=function(e){return r(e)},n=["h1","div","span","article","a","nav","button"];return(Array.isArray(e)?n.concat(e):n).forEach(function(e){t[e.toLowerCase()]=t.bind(null,e)()}),t},i=function(e,t){var n=t.resolve;t.reject;e.service("$createElement",function(){return o}),e.service("$window",function(){return window}),e.service("$domq",function(){return function(e){return document.querySelector(e)}}),e.service("$document",function(){return window.document}),n(e)};e.onInstance(i)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.supportRouterFactory=function(e){var t=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];r(this,e),this.routes=t}return o(e,[{key:"route",value:function(e){return new Promise(function(e,t){return function(n,r){for(var o=0;o<t.length;o++){var i=t[o];if(i.test(e))return void n(i.component)}r({message:"component not found",status:404})}}(e,this.routes))}},{key:"patternToRegExp",value:function(e){return Array.isArray(e)?new RegExp(["^",e.map(function(e){return e.replace("*","[^/]+")+"$"}).join("|"),"$"].join(""),"i"):this.patternToRegExp([e])}},{key:"addRoute",value:function(e){return e.regex=this.patternToRegExp(e.pattern),e.test=function(t){return e.regex.test(t.split("?")[0])},this.routes.push(e),this}}]),e}(),n=function(e,n){var r=n.resolve;n.reject;e.service("state",t),r(e)};e.onInstance(n)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Vent=function(){function e(){r(this,e),this._collection=new Map}return o(e,[{key:"on",value:function(e,t){return this._collection.set(e,Array.isArray(this._collection.get(e))?this._collection.get(e):[]),this._collection.get(e).push(t),this}},{key:"once",value:function(e,t){function n(){r.off(e,n),t.apply(this,arguments)}var r=this;return n.listener=t,this.on(e,t),this}},{key:"off",value:function(e,t){var n=this._collection.get(e),r=0;if(Array.isArray(n)){for(r;r<n.length;r+=1)if(n[r]===t||n[r].listener===t){n.splice(r,1);break}0===n.length&&this.removeAllListeners(e)}return this}},{key:"removeAllListeners",value:function(e){return this._collection.delete(e),this}},{key:"listeners",value:function(e){return this._collection.get(e)}},{key:"emit",value:function(){var e,t=[].slice.call(arguments,0),n=t.shift(),r=this._collection.get(n),o=0;if(r)for(r=r.slice(0),e=r.length,o;o<e;o+=1)r[o].apply(this,t);return this}}]),e}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.supportComponents=void 0;var r=n(10),o=function(e,t){var n=t.resolve;t.reject;e.service("GenericView",function(){return r.GenericView}),e.service("View",function(){return r.View}),e.service("VentView",function(){return r.VentView}),n(e)};t.supportComponents=function(e){e.onInstance(o)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VentView=t.GenericView=t.View=void 0;var r=n(11),o=n(12),i=n(13);t.View=o.View,t.GenericView=r.GenericView,t.VentView=i.VentView},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.GenericView=function(e){return function(e){function t(e,n,i,u,a){r(this,t);var c=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n,i,u,a));return c.genericPanel=[],c}return i(t,e),u(t,[{key:"listener",value:function(){(function(e){for(var t=function(e){return{controller:e.controller,data:e.data,name:e.name,url:e.url}},n=arguments.length,r=Array(n>1?n-1:0),o=1;o<n;o++)r[o-1]=arguments[o];var i=r.pop(),u=e.app.utils.genUrl("/"+e.urlName+"/"+e.app.utils.reduceParams({args:r[1],url:i})),a=e.app.utils.genUrl("/"+e.urlName+"/"+e.app.utils.reduceParams({args:r[1],url:i}));try{window.history.pushState(t(r[2]),r[3],u)}catch(e){window.history.replaceState(t(r[2]),r[3],a)}}).bind(null,this).apply(void 0,arguments)}},{key:"componentDidMount",value:function(){return this.template=this.createFirstTemplate(),this.loadData(),this.template}},{key:"componentDidUpdate",value:function(){this.app.vent.on([this.viewClassName,"state","update"].join("."),this.listener.bind(this))}},{key:"createFirstTemplate",value:function(){return this.dom.div({className:this.viewClassName},'<div class="content-loading">Loading content...</div>')}},{key:"createOfflineTemplate",value:function(){return this.dom.div({className:this.viewClassName},'<div class="offline-content">\nFailed to fetch new data. You might be offline and the data is not in cache yet.\n<div class="logo-icon"></div>\n</div>')}}]),t}(e)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.View=function(){function e(t,n,o,i,u){r(this,e),this.viewClassName=t,this.urlName=n,this.routeParams=o,this.app=u,this.dom=i,this.template=null}return o(e,[{key:"loadData",value:function(){}},{key:"createTemplate",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"render",value:function(e){if(this.template.parentElement){var t=e?e():this.createTemplate();this.template.parentElement.replaceChild(t,this.template),this.template=t,this.componentDidUpdate(),this.template.classList.remove("loading")}}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.VentView=function(e){return function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return i(t,e),u(t,[{key:"_render",value:function(){}},{key:"_mapDom",value:function(){}},{key:"_setEvents",value:function(){}},{key:"_handleClickEvent",value:function(e){}},{key:"_handleKeydownEvent",value:function(e){}},{key:"_removeEvents",value:function(){}}]),t}(e)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),i=(t.mix=function(e){return new i(e)},function(){function e(t){r(this,e),this.superclass=t}return o(e,[{key:"with",value:function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(function(e,t){return t(e)},this.superclass)}}]),e}())},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ValueMixin=t.MiddlewareMixin=t.ConstantMixin=t.DecorateMixin=t.FactoryMixin=t.ProviderMixin=t.Container=void 0;var r=n(16),o=n(17),i=n(18),u=n(19),a=n(20),c=n(21),s=n(22);t.Container=r.Container,t.ProviderMixin=o.ProviderMixin,t.FactoryMixin=i.FactoryMixin,t.DecorateMixin=u.DecorateMixin,t.ConstantMixin=a.ConstantMixin,t.MiddlewareMixin=c.MiddlewareMixin,t.ValueMixin=s.ValueMixin},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});t.Container=function e(t){if(r(this,e),!(this instanceof e))return e.module(t)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=Array.prototype.slice;t.ProviderMixin=function(e){return function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),u(t,[{key:"reducer",value:function(e,t){return t(e)}},{key:"provider",value:function(e,t){var n=e.split(".");if(this.providerMap[e]&&1===n.length&&!this.container[e+"Provider"])return console.error(e+" provider already instantiated.");this.originalProviders[e]=t,this.providerMap[e]=!0;var r=n.shift();return n.length?(this.createSubProvider.call(this,r,t,n),this):this.createProvider.call(this,r,t)}},{key:"getWithGlobal",value:function(e,t){return(e[t]||[]).concat(e.__global__||[])}},{key:"createProvider",value:function(e,t){var n=(this.id(),this.container),r=(this.decorators,this.middlewares,e+"Provider"),o=Object.create(null);o[r]={configurable:!0,enumerable:!0,get:function(){var e=new t;return delete n[r],n[r]=e,e}};var i=function(e,t){var r=this.container[t],o=void 0;return r&&(o=this.getWithGlobal(this.decorators,e).reduce(this.reducer,r.$get(this.container)),delete n[t],delete n[e]),void 0===o?o:this.applyMiddleware(this.getWithGlobal(this.middlewares,e),e,o,this.container)},u=i.bind(this,e,r);return o[e]={configurable:!0,enumerable:!0,get:u},Object.defineProperties(n,o),this}},{key:"createSubProvider",value:function(e,t,n){var r=this.getNestedModule.call(this,e);return this.factory(e,function(){return r.container}),r.provider(n.join("."),t)}},{key:"register",value:function(e){var t=void 0===e.$value?e:e.$value;return this[e.$type||"service"].apply(this,[e.$name,t].concat(e.$inject||[]))}},{key:"removeProviderMap",value:function(e){delete this.providerMap[e],delete this.container[e],delete this.container[e+"Provider"]}},{key:"resetProviders",value:function(){var e=this.originalProviders;Object.keys(this.originalProviders).forEach(function(t){var n=t.split(".");n.length>1&&(this.removeProviderMap.call(this,n[0]),n.forEach(this.removeProviderMap,this.getNestedModule.call(this,n[0]))),this.removeProviderMap.call(this,t),this.provider(t,e[t])},this)}},{key:"resolve",value:function(e){return this.deferred.forEach(function(t){t(e)}),this}},{key:"service",value:function(e,t){var n=arguments.length>2?a.call(arguments,2):null,r=this;return this.factory.call(this,e,function(){var e=t;if(n){var o=n.map(this.getNestedService.bind(r),r.container);o.unshift(t),e=t.bind.apply(t,o)}return new e})}}]),t}(e)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.FactoryMixin=function(e){return function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),u(t,[{key:"byMethod",value:function(e){return!/^\$(?:decorator|register|list)$|Provider$/.test(e)}},{key:"list",value:function(e){return Object.keys(e||this.container||{}).filter(this.byMethod)}},{key:"digest",value:function(e){return(e||[]).map(this.getNestedService.bind(this),this.container)}},{key:"factory",value:function(e,t){return this.provider.call(this,e,function(){this.$get=t})}},{key:"instanceFactory",value:function(e,t){return this.factory.call(this,e,function(e){return{instance:t.bind(t,e)}})}}]),t}(e)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.DecorateMixin=function(e){return function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),u(t,[{key:"decorator",value:function(e,t){"function"==typeof e&&(t=e,e="__global__");var n=e.split("."),r=n.shift();return n.length?this.getNestedModule.call(this,r).decorator(n.join("."),t):(this.decorators[r]||(this.decorators[r]=[]),this.decorators[r].push(t)),this}},{key:"defer",value:function(e){return this.deferred.push(e),this}}]),t}(e)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.ConstantMixin=function(e){return function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),u(t,[{key:"constant",value:function(e,t){var n=e.split(".");return e=n.pop(),this.defineConstant.call(n.reduce(this.setValueObject,this.container),e,t),this}},{key:"defineConstant",value:function(e,t){Object.defineProperty(this,e,{configurable:!1,enumerable:!0,value:t,writable:!1})}}]),t}(e)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.MiddlewareMixin=function(e){return function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),u(t,[{key:"applyMiddleware",value:function(e,t,n,r){var o={configurable:!0,enumerable:!0};return e.length?o.get=function(){var t=0,r=function(o){if(o)throw o;e[t]&&e[t++](n,r)};return r(),n}:(o.value=n,o.writable=!0),Object.defineProperty(r,t,o),r[t]}},{key:"middleware",value:function(e,t){"function"==typeof e&&(t=e,e="__global__");var n=e.split("."),r=n.shift();return n.length?this.getNestedModule.call(this,r).middleware(n.join("."),t):(this.middlewares[r]||(this.middlewares[r]=[]),this.middlewares[r].push(t)),this}}]),t}(e)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.ValueMixin=function(e){return function(e){function t(e){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return i(t,e),u(t,[{key:"value",value:function(e,t){var n=e.split(".");return e=n.pop(),this.defineValue.call(n.reduce(this.setValueObject,this.container),e,t),this}},{key:"setValueObject",value:function(e,t){var n=e[t];return n||(n={},this.defineValue.call(e,t,n)),n}},{key:"defineValue",value:function(e,t){Object.defineProperty(this,e,{configurable:!0,enumerable:!0,value:t,writable:!0})}}]),t}(e)}}])});